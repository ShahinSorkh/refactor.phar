<?xml version="1.0" encoding="UTF-8"?>
<project name="php-refactoring-browser" default="compile-phar" basedir=".">
    <!-- Import project specific settings -->
    <property file="build.properties" />

    <target name="behat">
        <exec executable="php" failonerror="true" dir="${basedir}">
            <arg value="vendor/bin/behat" />

            <arg value="--format" />
            <arg value="junit,progress" />
            <arg value="--out" />
            <arg value="${commons:logsdir}," />
        </exec>
    </target>

    <target name="compile-phar">
        <exec executable="php" failonerror="true" dir="${basedir}/build/dist">
            <arg value="-d" />
            <arg value="phar.readonly=Off" />
            <arg value="../../src/bin/compile" />
        </exec>
        <exec executable="tar" failonerror="true" dir="${basedir}/build/dist">
            <arg value="czvf" />
            <arg value="refactor.tar.gz" />
            <arg value="refactor.phar" />
            <arg value="../../README.md" />
            <arg value="../../LICENSE" />
        </exec>
    </target>
</project>
